metrics engine test. Take a look at metrics_engine_test.cpp for details.
