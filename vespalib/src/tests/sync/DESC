sync test. Take a look at sync.cpp for details.
