rwlock test. Take a look at rwlock.cpp for details.
