atomic test. Take a look at atomic.cpp for details.
